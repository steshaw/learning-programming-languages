<!DOCTYPE HTML>
<!-- Lifted from http://mrdoob.com/lab/javascript/requestanimationframe/ -->
<html lang="en">
  <head>
    <title>RequestAnimationFrame.js example</title>
  </head>
  <body>
    <script src="request-animation-frame.js"></script>
    <script>
      function init() {
        var canvas = document.createElement('canvas');
        canvas.width = 256;
        canvas.height = 256;

        var context = canvas.getContext('2d');

        document.body.appendChild(canvas);

        var frame = 0;
        var animate = function(animationTime) {
          ++frame;
          if (frame < 10) console.log("animationTime="+animationTime);
          draw(animationTime, context);
          requestAnimationFrame(animate);
        };

        requestAnimationFrame(animate);
      }

      function draw(animationTime, context) {
        var time = animationTime * 0.002;
        var x = Math.sin(time) * 96 + 128;
        var y = Math.cos(time * 0.9) * 96 + 128;

        context.fillStyle = 'rgb(245,245,245)';
        context.fillRect(0, 0, 255, 255);

        context.fillStyle = 'rgb(255,0,0)';
        context.beginPath();
        context.arc(x, y, 10, 0, Math.PI * 2, true);
        context.closePath();
        context.fill();
      }

      init();
    </script>

    <div style="width:256px">
      <a href="javascript:location='view-source:' + window.location.href;">view source</a><br /><br/>

      <a href="http://dev.chromium.org/developers/design-documents/requestanimationframe-implementation">requestAnimationFrame()</a> allows modern browsers to stop drawing graphics when a tab or window is not visible. Improving overall performance and batteries on mobile devices.<br /><br />

      <a href="https://gist.github.com/838785">RequestAnimationFrame.js</a> emulates the basic usage for old browsers.
    </div>
  </body>
</html>
